--[[=============================================================================== ** SceneMap v1.0 **  By Lysferd (C) 2014===============================================================================--]]require( 'lua.map.menu' )require( 'lua.map.message' )require( 'lua.map.player' )----------------------------------------------------------------------- * Declare SceneMap.---------------------------------------------------------------------SceneMap = { }SceneMap.__index = SceneMapfunction SceneMap.new()  local obj = setmetatable( { }, SceneMap )    obj.name    = 'map'  obj.player  = Player.new()  obj.menu    = Menu.new()  obj.message = Message.new()  obj.background = love.graphics.newImage( 'graphics/map.png' )    return objend----------------------------------------------------------------------- * Frame update.---------------------------------------------------------------------function SceneMap:update()  if self.menu:closed() then    self.player:update()  end  self.menu:update()  self.message:update()end----------------------------------------------------------------------- * Frame update.---------------------------------------------------------------------function SceneMap:draw()  love.graphics.draw( self.background )  self.player:draw()  self.menu:draw()  self.message:draw()end---------------------------------------------------------------------function SceneMap:terminate()  -- ...end----------------------------------------------------------------------- * Frame update.---------------------------------------------------------------------function SceneMap:keypressed( key, isrepeat )  -- DEBUG --  self.message:keypressed( key, isrepeat )  -- DEBUG --    self.player:keypressed( key, isrepeat )    if key == 'm' then    if self.menu:closed() then      self.menu:open( self.player:coordinates() )    else      self.menu:close()    end  endend----------------------------------------------------------------------- * Frame update.---------------------------------------------------------------------function SceneMap:mousepressed( x, y, key )  if within_area( x, y, self.message:clickableArea() ) then    self.message:mousepressed( x, y )  endend