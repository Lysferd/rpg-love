--[[=============================================================================== ** SceneFree v1.0 **  By Lysferd (C) 2014===============================================================================--]]require( 'lua.menu' )require( 'lua.message' )require( 'lua.player' )----------------------------------------------------------------------- * Declare SceneFree.---------------------------------------------------------------------SceneFree = { }SceneFree.__index = SceneFreefunction SceneFree.new()  local obj = setmetatable( { }, SceneFree )    obj.name    = 'free'  obj.player  = Player.new()  obj.menu    = Menu.new()  obj.message = Message.new()    return objend----------------------------------------------------------------------- * Frame update.---------------------------------------------------------------------function SceneFree:update()  if self.menu:closed() then    self.player:update()  end  self.menu:update()  self.message:update()end----------------------------------------------------------------------- * Frame update.---------------------------------------------------------------------function SceneFree:draw()  self.player:draw()  self.menu:draw()  self.message:draw()end----------------------------------------------------------------------- * Frame update.---------------------------------------------------------------------function SceneFree:keypressed( key, isrepeat )  -- DEBUG --  self.message:keypressed( key, isrepeat )  -- DEBUG --    self.player:keypressed( key, isrepeat )    if key == 'm' then    if self.menu:closed() then      self.menu:open( self.player:coordinates() )    else      self.menu:close()    end  endend----------------------------------------------------------------------- * Frame update.---------------------------------------------------------------------function SceneFree:mousepressed( x, y, key )  if within_area( x, y, self.message:clickableArea() ) then    self.message:mousepressed( x, y )  endend